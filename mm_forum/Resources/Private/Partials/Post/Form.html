{namespace mmf=Tx_MmForum_ViewHelpers}
<f:form name="post" object="{post}" controller="Post" action="{action}">
	<div class="tx-mmforum-form-row tx-mmforum-odd">
		<div class="tx-mmforum-form-left"><label for="text">Post text</label></div>
		<div class="tx-mmforum-form-right">
			<f:form.textarea property="text" rows="5" cols="80" />
		</div>
	</div>
	<mmf:authentication.ifAccess object="{topic}" accessType="newAttachment">
		<div class="tx-mmforum-form-row tx-mmforum-even">
			<div class="tx-mmforum-form-left"><label for="text">Attachments</label></div>
			<div class="tx-mmforum-form-right">
				<f:if condition="{post.attachments}">
					<f:for each="{post.attachments}" as="attachment">
						<div>
							{attachment.filename}, <mmf:format.fileSize>{attachment.filesize}</mmf:format.fileSize>
						</div>
					</f:for>
				</f:if>
				<f:form.upload name="attachment[]" />
			</div>
		</div>
	</mmf:authentication.ifAccess>
	<div class="tx-mmforum-form-row">
		<div class="tx-mmforum-form-right">
			<f:form.hidden name="topic" value="{topic}" />
			<f:form.submit value="Submit" />
		</div>
	</div>
</f:form>